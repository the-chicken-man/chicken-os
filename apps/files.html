<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ChickenOS</title>
  <link rel="stylesheet" href="os-style.css">
  <link rel="icon" type="image/x-icon" href="./Chicken.png">
</head>
<body>

  <h2>View files [BETA]</h2>
  <input type="file" id="fileInput" accept="image/*, .html, .pdf, .txt, .mp4, .webm, .ogg">
  <div id="fileDisplayArea"></div>

  <script>
    
    const fileInput = document.getElementById("fileInput");
    const fileDisplayArea = document.getElementById("fileDisplayArea");

    
    fileInput.addEventListener("change", handleFileSelect, false);

    
    function handleFileSelect(event) {
      const file = event.target.files[0];
      if (file) {
        const fileType = file.type;
        const reader = new FileReader(); 

        
        fileDisplayArea.innerHTML = '';

        
        if (fileType.startsWith("image/")) {
          renderImage(file);
        } else if (fileType === "text/html") {
          renderHTML(file);
        } else if (fileType === "application/pdf") {
          renderPDF(file);
        } else if (fileType.startsWith("video/")) {
          renderVideo(file);
        } else if (fileType === "text/plain") {
          renderText(file);
        } else {
          fileDisplayArea.innerHTML = "Unsupported file type!";
        }
      }
    }

    
    function renderImage(file) {
      const reader = new FileReader();
      reader.onload = function(event) {
        const img = document.createElement("img");
        img.src = event.target.result;
        img.style.maxWidth = "100%"; 
        fileDisplayArea.appendChild(img);
      };
      reader.readAsDataURL(file); 
    }

   
    function renderHTML(file) {
      const reader = new FileReader();
      reader.onload = function(event) {
        const iframe = document.createElement("iframe");
        iframe.srcdoc = event.target.result; 
        iframe.style.width = "100%";
        iframe.style.height = "500px"; 
        fileDisplayArea.appendChild(iframe);
      };
      reader.readAsText(file); 
    }

    
    function renderPDF(file) {
      const reader = new FileReader();
      reader.onload = function(event) {
        const pdfData = event.target.result;
        const pdfIframe = document.createElement("iframe");
        pdfIframe.src = URL.createObjectURL(new Blob([pdfData], {type: 'application/pdf'}));
        pdfIframe.style.width = "100%";
        pdfIframe.style.height = "500px"; 
        fileDisplayArea.appendChild(pdfIframe);
      };
      reader.readAsArrayBuffer(file); 
    }

    
    function renderVideo(file) {
      const reader = new FileReader();
      reader.onload = function(event) {
        const video = document.createElement("video");
        video.src = event.target.result;
        video.controls = true; 
        video.style.maxWidth = "100%"; 
        fileDisplayArea.appendChild(video);
      };
      reader.readAsDataURL(file); 
    }

    
    function renderText(file) {
      const reader = new FileReader();
      reader.onload = function(event) {
        const pre = document.createElement("pre");
        pre.textContent = event.target.result; 
        fileDisplayArea.appendChild(pre);
      };
      reader.readAsText(file); 
    }
    // this was too hard for me to code so chatgpt heehee ^
  </script>

  <div class="taskbar">
    
    <div class="taskbar-icons">
  <a href="files.html"><img src="https://img.icons8.com/ios-glyphs/30/ffffff/folder-invoices--v1.png" alt="File Explorer"></a>
   <a href="browse.html"><img src="https://img.icons8.com/?size=100&id=123437&format=png&color=ffffff" alt="Browser"></a>
   <a href="settings.html"><img src="https://img.icons8.com/?size=100&id=364&format=png&color=ffffff" alt="Settings"></a>
   <a href="gxmes.html"><img src="https://img.icons8.com/?size=100&id=15888&format=png&color=ffffff" alt="Games"></a>
   <a href="home.html"><img src="https://img.icons8.com/?size=100&id=2719&format=png&color=ffffff" alt="Home"></a>
   <a href="pr0xies.html"><img src="https://img.icons8.com/?size=100&id=CUotuMREPL14&format=png&color=ffffff" alt="Proxies"></a>
    </div>
    
    <div class="clock" id="clock">00:00</div>
  </div>

  

</body>
</html>
